import React from "react";
import { View, Text, Image, TouchableOpacity, StyleSheet } from "react-native";
import PropTypes from 'prop-types';

import styles from "./styles";

const arrowStyle = StyleSheet.create({
  container: {
    width: 44,
    height: 44,
    justifyContent: "center",
    alignItems: "center"
  }
});
const Arrow = ({source, width, height}) => (
    <View style={arrowStyle.container}>
      <Image
          source={source}
          resizeMode="contain"
          style={{width, height}}/>
    </View>
);
Arrow.propTypes = {
  source: PropTypes.number.isRequired,
  width: PropTypes.number.isRequired,
  height: PropTypes.number.isRequired
};
Arrow.defaultProps = {
  width: 6,
  height: 11
};

const todayBtnStyle = StyleSheet.create({
  container: {
    width: 47,
    height: 25,
    alignItems: "center",
    justifyContent: "center",
    borderWidth: 1,
    borderRadius: 5,
    borderColor: "#d7d7d7"
  },
  text: {
    fontSize: 11,
    color: "#676767"
  }
});

const topBarStyles = StyleSheet.create({
  title: {
    fontWeight: "700",
    letterSpacing: 0
  }
});

const TopBar = ({
    onPrev,
    onNext,
    customStyle,
    scrollToToday,
    onTitlePress,
    localizedMonth,
    year,
    customTitleView}) => (
    <View style={[styles.calendarControls, customStyle.calendarControls]}>
      <View style={[styles.container, customStyle.container]}>
        <TouchableOpacity
            style={[styles.controlButton, customStyle.controlButton]}
            onPress={onPrev}>
          <Arrow source={require("./assets/calendar-arrow-left.png")}/>
        </TouchableOpacity>
        <View style={styles.controlButton}>
          <TouchableOpacity style={todayBtnStyle.container}
                            onPress={scrollToToday}>
            <Text style={todayBtnStyle.text}>Today</Text>
          </TouchableOpacity>
        </View>
      </View>
      <TouchableOpacity
          style={styles.containerTitle}
          onPress={onTitlePress}>
        {customTitleView ||
        <View style={{flexDirection: "row", alignItems: "center"}}>
          <Text style={[topBarStyles.title, customStyle.title]}>
            {localizedMonth} {year}
          </Text>
          <Arrow
              source={require("./assets/calendar-arrow-down.png")}
              width={10}
              height={10}/>
        </View>}
      </TouchableOpacity>
      <View style={[styles.container, customStyle.container]}>
        <View style={[styles.controlButton, customStyle.controlButton]}>
        </View>
        <TouchableOpacity
            style={[styles.controlButton, customStyle.controlButton]}
            onPress={onNext}>
          <Arrow source={require("./assets/calendar-arrow-right.png")}/>
        </TouchableOpacity>

      </View>
    </View>
);
TopBar.defaultProps = {
  onPrev: () => {},
  onNext: () => {},
  customStyle: {},
  scrollToToday: () => {},
  onTitlePress: () => {},
  localizedMonth: "",
  year: 2000
};
TopBar.propTypes = {
  onPrev: PropTypes.func.isRequired,
  onNext: PropTypes.func.isRequired,
  customStyle: PropTypes.object.isRequired,
  scrollToToday: PropTypes.func.isRequired,
  onTitlePress: PropTypes.func.isRequired,
  localizedMonth: PropTypes.string.isRequired,
  year: PropTypes.number.isRequired
};

module.exports = TopBar;
